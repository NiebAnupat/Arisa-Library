generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model books {
  book_id          Int            @id @default(autoincrement())
  title            String         @db.VarChar(255)
  author           String         @db.VarChar(255)
  publication_year Int?
  description      String?
  cover_filename   String?        @db.VarChar(255)
  available        Boolean?       @default(true)
  transactions     transactions[]
}

model librarians {
  librarian_id Int            @id @default(autoincrement())
  name         String         @db.VarChar(255)
  email        String         @unique @db.VarChar(255)
  phone        String?        @db.VarChar(15)
  join_date    DateTime?      @default(dbgenerated("CURRENT_DATE")) @db.Date
  transactions transactions[]
}

model members {
  member_id    Int            @id @default(autoincrement())
  name         String         @db.VarChar(255)
  email        String         @unique @db.VarChar(255)
  phone        String?        @db.VarChar(15)
  join_date    DateTime?      @default(dbgenerated("CURRENT_DATE")) @db.Date
  transactions transactions[]
}

model transactions {
  transaction_id Int         @id @default(autoincrement())
  book_id        Int?
  member_id      Int?
  librarian_id   Int?
  borrow_date    DateTime    @db.Date
  return_date    DateTime?   @db.Date
  due_date       DateTime    @db.Date
  fine           Decimal?    @default(0) @db.Decimal
  books          books?      @relation(fields: [book_id], references: [book_id], onDelete: NoAction, onUpdate: NoAction)
  librarians     librarians? @relation(fields: [librarian_id], references: [librarian_id], onDelete: NoAction, onUpdate: NoAction)
  members        members?    @relation(fields: [member_id], references: [member_id], onDelete: NoAction, onUpdate: NoAction)
}
